transaction dao  dao factory factory transaction bean loader loader  transaction bean loader operational profile loader operational profile loader  operational profile loader transaction dao dao factory factory  this factory  factory  list transaction bean get all transactions db exception  connection conn  null prepared statement ps  null  conn  factory get connection ps  conn prepare statement select  from transaction log order by time logged desc result set rs  ps execute query loader load list rs  sql exception e  e print stack trace db exception e   db util close connection conn ps   log transaction transaction type type logged in mid db exception  log transaction type logged in mid 0 l   log transaction transaction type type logged in mid secondary mid string added info db exception  connection conn  null prepared statement ps  null  conn  factory get connection ps  conn prepare statement insert into transaction log logged in mid secondary mid   transaction code added info values ps set long 1 logged in mid ps set long 2 secondary mid ps set int 3 type get code ps set string 4 added info ps execute update  sql exception e  e print stack trace db exception e   db util close connection conn ps   list transaction bean get all record accesses long patient id dlhcp id get by role db exception  connection conn  null prepared statement ps  null  conn  factory get connection ps  conn prepare statement select  from transaction log where secondary mid and transaction code   in  transaction type patient viewable str   and logged in mid order by time logged desc ps set long 1 patient id ps set long 2 dlhcp id result set rs  ps execute query list transaction bean tb list  loader load list rs tb list  add and sort roles tb list patient id get by role tb list  sql exception e  e print stack trace db exception e   db util close connection conn ps   list transaction bean get transactions affecting long mid dlhcp id java util date start range db exception  connection conn  null prepared statement ps  null  conn  factory get connection ps  conn prepare statement select  from transaction log where time logged     and secondary mid and transaction code   in   transaction type patient viewable str    or logged in mid and transaction code    and not logged in mid and transaction code in   transaction type dlhcp hidden str     order by time logged desc limit 0 ps set string 2 mid   ps set string 3 mid   ps set int 4 transaction type login success get code ps set timestamp 1 timestamp start get time ps set long 5 dlhcp id ps set int 6 range result set rs  ps execute query list transaction bean tb list  loader load list rs tb list  sql exception e  e print stack trace db exception e   db util close connection conn ps   list transaction bean get record accesses long patient id dlhcp id java util date lower java util date upper get by role db exception  connection conn  null prepared statement ps  null  conn  factory get connection ps  conn prepare statement select  from transaction log where secondary mid and transaction code in   transaction type patient viewable str     and time logged   and time logged     and logged in mid   order by time logged desc ps set long 1 patient id ps set timestamp 2 timestamp lower get time ps set timestamp 3 timestamp upper get time  1000 l  60 l  60  24 l ps set long 4 dlhcp id result set rs  ps execute query list transaction bean tb list  loader load list rs tb list  add and sort roles tb list patient id get by role tb list  sql exception e  e print stack trace db exception e   db util close connection conn ps   operational profile get operational profile db exception  connection conn  null prepared statement ps  null  conn  factory get connection ps  conn prepare statement select transaction code count transaction id as total count   count if logged in mid 9000000000 transaction id null as patient count   count if logged in mid 9000000000 transaction id null as personnel count   from transaction log group by transaction code order by transaction code asc result set rs  ps execute query operational profile loader load single rs  sql exception e  e print stack trace db exception e   db util close connection conn ps   list transaction bean add and sort roles list transaction bean tb list patient id sort by role db exception  connection conn  null prepared statement ps  null  conn  factory get connection for transaction bean t  tb list  ps  conn prepare statement select role from users where mid ps set long 1 t get logged in mid result set rs  ps execute query string role   if rs next role  rs get string role if role equals er role  emergency responder if role equals uap role  uap if role equals hcp  role  lhcp ps  conn prepare statement select patient id from declared hcp where hcpid ps set long 1 t get logged in mid result set rs 2  ps execute query while rs 2 next  rs 2 get long patient id  patient id role  dlhcp break    if role equals patient role  patient ps  conn prepare statement select representee mid from representatives where representer mid ps set long 1 t get logged in mid result set rs 2  ps execute query while rs 2 next  rs 2 get long representee mid  patient id role  personal health representative break    t set role role  if sort by role transaction bean array  transaction bean tb list size array 0  tb list get 0 transaction bean t for int i  1 i  tb list size i  t  tb list get i string role  t get role j  0 while array j  null  role compare to ignore case array j get role  0 j for int k  i k  j k  array k  array k 1  array j  t  size  tb list size for int i  0 i  size i tb list set i array i  tb list  sql exception e  e print stack trace db exception e   db util close connection conn ps   