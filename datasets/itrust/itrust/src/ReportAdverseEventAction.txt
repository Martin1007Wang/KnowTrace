report adverse event action  logged in mid email util emailer patient dao patient dao personnel dao personnel dao adverse event dao adverse event dao hcp id adverse event validator validator report adverse event action string hcp id dao factory factory logged in mid this logged in mid  logged in mid this patient dao  factory get patient dao this personnel dao  factory get personnel dao this emailer  email util factory this adverse event dao  factory get adverse event dao this hcp id  long parse long hcp id this validator  adverse event validator  report adverse event action dao factory factory logged in mid this logged in mid  logged in mid this patient dao  factory get patient dao this personnel dao  factory get personnel dao this emailer  email util factory this adverse event dao  factory get adverse event dao this validator  adverse event validator  email send mails list adverse event bean ae list i trust exception form validation exception db exception  list string mi dlist  array list string string patient id   for adverse event bean beaner  ae list patient id  beaner get mid string new desc   drug   beaner get drug     beaner get code   description   beaner get description beaner set description new desc  for adverse event bean beano  ae list if mi dlist contains beano get prescriber mi dlist add beano get prescriber   email email  email for string num  mi dlist string message   patient   patient dao get name long parse long patient id   mid   patient id   has reported the following adverse event s for adverse event bean beano  ae list if beano get prescriber equals num message  message  beano get description   string from email email set from noreply itrust com patient bean sender  patient dao get patient logged in mid personnel bean receiver  personnel dao get personnel long parse long num list string to list  array list string to list add receiver get email from email  sender get email email set to list to list email set from from email email set subject string format adverse event report prescription email set body message emailer send email email  email  email send mail adverse event bean ae bean throws i trust exception form validation exception db exception email email  email string from email email set from noreply itrust com list string to list  array list string patient bean sender  patient dao get patient logged in mid personnel bean receiver  personnel dao get personnel hcp id to list add receiver get email from email  sender get email email set to list to list email set from from email email set subject string format adverse event report immunization email set body string format  patient   patient dao get name long parse long ae bean get mid   mid   ae bean get mid   has reported the following adverse event   drug   ae bean get drug    ae bean get code   description   ae bean get description  emailer send email email email  string add report adverse event bean ae bean throws i trust exception form validation exception db exception  try validator validate ae bean catch form validation exception e e print stack trace e get message  try adverse event dao add report ae bean hcp id  catch db exception e  i trust exception e get message    