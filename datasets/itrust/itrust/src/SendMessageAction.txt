send message action  logged in mid email util emailer patient dao patient dao personnel dao personnel dao message dao message dao e mail validator email val message validator mess val send message action dao factory factory logged in mid  this logged in mid  logged in mid this patient dao  factory get patient dao this personnel dao  factory get personnel dao this emailer  email util factory this message dao  factory get message dao this email val  e mail validator this mess val  message validator  send message message bean m bean i trust exception sql exception form validation exception  mess val validate m bean email val validate m bean message dao add message m bean email email  email string sender name string from email email set from noreply itrust com list string to list  array list string 8999999999 l  m bean get from  8999999999 l  m bean get to personnel bean sender  personnel dao get personnel logged in mid personnel bean receiver  personnel dao get personnel m bean get to to list add receiver get email sender name  sender get full name from email  sender get email else 6999999999 l  m bean get from  personnel bean sender  personnel dao get personnel logged in mid 6999999999 l  m bean get to  personnel bean receiver  personnel dao get personnel m bean get to to list add receiver get email   patient bean receiver  patient dao get patient m bean get to to list add receiver get email  sender name  sender get full name from email  sender get email   patient bean sender  patient dao get patient logged in mid 6999999999 l  m bean get to  personnel bean receiver  personnel dao get personnel m bean get to to list add receiver get email   patient bean receiver  patient dao get patient m bean get to to list add receiver get email  sender name  sender get full name from email  sender get email   email set to list to list email set from from email email set subject string format a message from s sender name email set body string format you have received a message from s in i trust to view it log in to i trust and go to view my messages sender name emailer send email email  string get patient name long mid i trust exception  patient dao get name mid  string get personnel name long mid i trust exception  personnel dao get name mid  list patient bean get my representees i trust exception  list patient bean representees  array list patient bean  representees  patient dao get represented logged in mid  db exception e  e print stack trace  representees  list personnel bean get my dlhc ps i trust exception  get dlhc ps for logged in mid  list personnel bean get dlhc ps for long pid i trust exception  list personnel bean dlhcps  array list personnel bean  dlhcps  patient dao get declared hc ps pid  db exception e  e print stack trace  dlhcps  