view patient office visit history action  logged in mid patient dao patient dao personnel dao personnel dao office visit dao officevisit dao array list patient visit bean visits view patient office visit history action dao factory factory logged in mid  this logged in mid  logged in mid this personnel dao  factory get personnel dao officevisit dao  factory get office visit dao this patient dao  factory get patient dao visits  array list patient visit bean  process office visits i trust exception   list office visit bean ovlist  officevisit dao get all office visits for lhcp logged in mid iterator office visit bean it  ovlist iterator office visit bean ov patient visit bean visit bean it has next  visit bean  patient visit bean ov  it next patient bean pb pb  patient dao get patient ov get patient id visit bean set patient pb visit bean set patient name pb get full name string date  ov get visit date str scanner sc  scanner date sc use delimiter string month  sc next string day  sc next string year  sc next visit bean set last ov date m month visit bean set last ov date d day visit bean set last ov date y year visit bean set last ov date year   month   date visit bean set address 1 pb get street address 1    pb get street address 2 visit bean set address 2 pb get city    pb get state   pb get zip b  patient in list pb date if b  false visits add visit bean   db exception dbe  i trust exception dbe get message   patient in list patient bean pb string date  iterator patient visit bean it  visits iterator patient visit bean visit bean it has next visit bean  it next if visit bean get patient name equals pb get full name if visit bean get last ov date y compare to date  0 visit bean set last ov date date  true   false  list patient visit bean get patients db exception   process office visits  i trust exception ie   visits  personnel bean get personnel i trust exception  personnel dao get personnel logged in mid  