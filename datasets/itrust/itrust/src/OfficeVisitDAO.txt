office visit dao  dao factory factory office visit loader office visit loader  office visit loader diagnosis bean loader diagnosis loader  diagnosis bean loader true office visit dao dao factory factory  this factory  factory  add office visit bean ov db exception  connection conn  null prepared statement ps  null  conn  factory get connection ps  conn prepare statement insert into office visits visit date notes hcpid patient id hospital id values  set values ps ov ps execute update db util get last insert conn  sql exception e  e print stack trace db exception e   db util close connection conn ps   set values prepared statement ps office visit bean ov sql exception  ps set date 1 java sql date ov get visit date get time ps set string 2 ov get notes ps set long 3 ov get hcp id ps set long 4 ov get patient id ps set string 5 ov get hospital id  update office visit bean ov db exception  connection conn  null prepared statement ps  null  conn  factory get connection ps  conn prepare statement update office visits set visit date notes hcpid   patient id hospital id where id set values ps ov ps set long 6 ov get id ps execute update  sql exception e  e print stack trace db exception e   db util close connection conn ps   office visit bean get office visit long visit id db exception  connection conn  null prepared statement ps  null  conn  factory get connection ps  conn prepare statement select  from office visits where id   ps set long 1 visit id result set rs  ps execute query rs next load full office vist rs visit id null  sql exception e  e print stack trace db exception e   db util close connection conn ps   office visit bean load full office vist result set rs visit id sql exception db exception  office visit bean ov  office visit bean visit id ov set visit date str new simple date format mm dd yyyy format new date rs get date visit date get time ov set hcp id rs get long hcpid ov set notes rs get string notes ov set patient id rs get long patient id ov set hospital id rs get string hospital id ov  check office visit exists long ov id pid db exception  connection conn  null prepared statement ps  null  conn  factory get connection ps  conn prepare statement select  from office visits where id and patient id ps set long 1 ov id ps set long 2 pid result set rs  ps execute query rs next  sql exception e  e print stack trace db exception e   db util close connection conn ps   list office visit bean get all office visits long pid db exception  connection conn  null prepared statement ps  null  conn  factory get connection ps  conn prepare statement select  from office visits where patient id order by visit date desc ps set long 1 pid result set rs  ps execute query office visit loader load list rs  sql exception e  e print stack trace db exception e   db util close connection conn ps   list office visit bean get all office visits for lhcp long mid db exception  connection conn  null prepared statement ps  null  mid  0 l sql exception hcpid cannot be null conn  factory get connection ps  conn prepare statement select  from office visits where hcpid order by visit date desc ps set long 1 mid result set rs  ps execute query office visit loader load list rs  sql exception e  e print stack trace db exception e   db util close connection conn ps   list office visit bean get office visits with no survey long pid db exception  connection conn  null prepared statement ps  null  conn  factory get connection ps  conn prepare statement select  from office visits where id not in select visitid from ov survey and patient id   order by visit date desc ps set long 1 pid result set rs  ps execute query office visit loader load list rs  sql exception e  e print stack trace db exception e   db util close connection conn ps   list office visit bean get office visits from hospital string hospital id db exception connection conn  null prepared statement ps  null  conn  factory get connection ps  conn prepare statement select  from officevisits where hospital id   order by id desc ps set string 1 hospital id result set rs  ps execute query office visit loader load list rs  sql exception e e print stack trace db exception e   db util close connection conn ps   list office visit bean get all office visits for diagnosis string icdcode db exception  list diagnosis bean diags  null list office visit bean ovs  array list office visit bean connection conn  null prepared statement ps  null result set rs null  icdcode  null sql exception icdcode cannot be null conn  factory get connection ps  conn prepare statement select  from ovdiagnosis ovd icdcodes icd where ovd icd code and icd code ps set string 1 icdcode ps set string 2 icdcode rs  ps execute query diags  diagnosis loader load list rs rs close ps close ps  null rs  null diagnosis bean bean diags  ps  conn prepare statement select  from officevisits ov where ov id ps set int 1 int bean get visit id rs  ps execute query rs next  ovs add load full office vist rs bean get visit id  rs close ps close  ovs  sql exception e  e print stack trace db exception e   db util close connection conn ps   