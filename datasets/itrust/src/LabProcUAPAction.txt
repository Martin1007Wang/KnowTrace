lab proc uap action  lab procedure dao lp dao logged in mid lab procedure validator validator dao factory factory lab proc uap action dao factory factory logged in mid  factory get transaction dao lp dao  factory get lab procedure dao this logged in mid  logged in mid validator  lab procedure validator this factory  factory  update procedure lab procedure bean b db exception form validation exception validator validate b if b get status equals lp dao get lab procedure b get procedure id get status email util factory send email make email b  lp dao update lab procedure b  email make email lab procedure bean b db exception patient bean p  patient dao factory get patient b get pid email email  email email set from no reply itrust com email set to list arrays as list p get email email set subject a lab procedure was updated email set body string format dear s n your lab procedure s has a updated status of s log on to i trust to view p get full name b get loinc b get status email  list lab procedure bean view procedures long id db exception  lp dao get all lab procedures date id  list lab procedure bean view patient procedures long pid db exception  lp dao get lab procedures logged in mid pid  