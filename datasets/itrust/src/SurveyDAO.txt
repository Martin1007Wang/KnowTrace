survey dao  dao factory factory survey loader survey loader survey dao dao factory factory  this factory  factory this survey loader  survey loader  add completed survey survey bean survey bean date date db exception  connection conn  null prepared statement ps  null  conn  factory get connection ps  conn prepare statement insert into ov survey visit id survey date values  ps set long 1 survey bean get visit id ps set timestamp 2 java sql timestamp date get time ps execute update survey bean get waiting room minutes  0  ps  conn prepare statement update ov survey set waiting room minutes   where visit id   ps set float 1 survey bean get waiting room minutes ps set long 2 survey bean get visit id ps execute update  survey bean get exam room minutes  0  ps  conn prepare statement update ov survey set exam room minutes   where visit id   ps set float 1 survey bean get exam room minutes ps set long 2 survey bean get visit id ps execute update  survey bean get visit satisfaction  0  ps  conn prepare statement update ov survey set visit satisfaction   where visit id   ps set float 1 survey bean get visit satisfaction ps set long 2 survey bean get visit id ps execute update  survey bean get treatment satisfaction  0  ps  conn prepare statement update ov survey set treatment satisfaction   where visit id   ps set float 1 survey bean get treatment satisfaction ps set long 2 survey bean get visit id ps execute update   sql exception e  e print stack trace db exception e   db util close connection conn ps   survey bean get survey data long id db exception  connection conn  null prepared statement ps  null  conn  factory get connection ps  conn prepare statement select  from ov survey where visit id   ps set long 1 id result set rs  ps execute query rs next survey loader load single rs  sql exception e  e print stack trace db exception e   db util close connection conn ps   is survey completed long visit id db exception  connection conn  null prepared statement ps  null  conn  factory get connection ps  conn prepare statement select count from ov survey where visit id   ps set long 1 visit id result set rs  ps execute query rs next rs get int 1  0  false  true  sql exception e  e print stack trace db exception e   db util close connection conn ps   