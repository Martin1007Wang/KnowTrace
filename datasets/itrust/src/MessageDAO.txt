message dao  dao factory factory message bean loader mb loader message dao dao factory factory  this factory  factory this mb loader  message bean loader  list message bean get messages for long mid sql exception  connection conn  null prepared statement ps  null conn  factory get connection ps  conn prepare statement select  from message where to id   order by sent date desc ps set long 1 mid result set rs  ps execute query list message bean mb list  this mb loader load list rs db util close connection conn ps mb list  list message bean get messages time ascending long mid sql exception  connection conn  null prepared statement ps  null conn  factory get connection ps  conn prepare statement select  from message where to id   order by sent date asc ps set long 1 mid result set rs  ps execute query list message bean mb list  this mb loader load list rs db util close connection conn ps mb list  list message bean get messages name ascending long mid sql exception  connection conn  null prepared statement ps  null result set rs conn  factory get connection if mid  999999999 ps  conn prepare statement select message from message patients where message from id patients mid and message to id order by patients last name asc patients first name asc message sent date asc ps set long 1 mid rs  ps execute query  else ps  conn prepare statement select message from message personnel where message from id personnel mid and message to id order by personnel last name asc personnel first name asc message sent date asc ps set long 1 mid rs  ps execute query  list message bean mb list  this mb loader load list rs db util close connection conn ps mb list  list message bean get messages name descending long mid sql exception  connection conn  null prepared statement ps  null result set rs conn  factory get connection if mid  999999999 ps  conn prepare statement select message from message patients where message from id patients mid and message to id order by patients last name desc patients first name desc message sent date desc ps set long 1 mid rs  ps execute query  else ps  conn prepare statement select message from message personnel where message from id personnel mid and message to id order by personnel last name desc personnel first name desc message sent date desc ps set long 1 mid rs  ps execute query  list message bean mb list  this mb loader load list rs db util close connection conn ps mb list  list message bean get messages from long mid sql exception  connection conn  null prepared statement ps  null conn  factory get connection ps  conn prepare statement select  from message where from id   order by sent date desc ps set long 1 mid result set rs  ps execute query list message bean mb list  this mb loader load list rs db util close connection conn ps mb list  list message bean get messages from time ascending long mid sql exception  connection conn  null prepared statement ps  null conn  factory get connection ps  conn prepare statement select  from message where from id   order by sent date asc ps set long 1 mid result set rs  ps execute query list message bean mb list  this mb loader load list rs db util close connection conn ps mb list  list message bean get messages from name ascending long mid sql exception  connection conn  null prepared statement ps  null result set rs conn  factory get connection if mid  999999999 ps  conn prepare statement select message from message patients where message to id patients mid and message from id order by patients last name asc patients first name asc message sent date asc ps set long 1 mid rs  ps execute query  else ps  conn prepare statement select message from message personnel where message to id personnel mid and message from id order by personnel last name asc personnel first name asc message sent date asc ps set long 1 mid rs  ps execute query  list message bean mb list  this mb loader load list rs db util close connection conn ps mb list  list message bean get messages from name descending long mid sql exception  connection conn  null prepared statement ps  null result set rs conn  factory get connection if mid  999999999 ps  conn prepare statement select message from message patients where message to id patients mid and message from id order by patients last name desc patients first name desc message sent date desc ps set long 1 mid rs  ps execute query  else ps  conn prepare statement select message from message personnel where message to id personnel mid and message from id order by personnel last name desc personnel first name desc message sent date desc ps set long 1 mid rs  ps execute query  list message bean mb list  this mb loader load list rs db util close connection conn ps mb list  add message message bean m bean sql exception  connection conn  null prepared statement ps  null conn  factory get connection m bean get parent message id  0 l  ps  conn prepare statement insert into message from id to id sent date message subject been read   values   now    this mb loader load parameters ps m bean   ps  conn prepare statement insert into message from id to id sent date message subject been read parent msg id    values   now     this mb loader load parameters ps m bean  ps execute update db util close connection conn ps  update read message bean m bean db exception  connection conn  null prepared statement ps  null  conn  factory get connection ps  conn prepare statement update message set been read 1 where message id ps set long 1 m bean get message id ps execute update  sql exception e  e print stack trace db exception e   db util close connection conn ps   